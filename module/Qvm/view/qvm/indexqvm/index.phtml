<?php
$form = $this->form;
echo $this->form ()->openTag ( $form );
?>
<div class="row-fluid">
	<div class="span9">
		<h1>Mes prochains &eacutev&eacutenements</h1>
		<table class="table">
			<?php
			foreach ( $upcomingParticipatings as $upcomingParticipating ) :
				?>
				 <tr class="<?php echo $this->cycle(array('liste-grise','liste-blanche'))->next()?>">
					<td><?php echo $this->escapeHtml($upcomingParticipating->title);?></td>
					<td><a href="<?php echo $this->url('activity', array('action'=>'detailEvent', 'id' => $upcomingParticipating->id_event));?>" >
			<?php
				echo $this->dateFormat(
   				new DateTime($upcomingParticipating->date),
    			IntlDateFormatter::FULL, // date
    			IntlDateFormatter::SHORT // time
			);
?>
		</td>
				<td><?php echo $this->formRow ( $form->get ( 'voteEvenement' )->setAttribute('value',$upcomingParticipating->vote) ).'&nbsp;'; echo $this->formRow ( $form->get ( 'submit' ));?></td>
				</tr>
				<?php 
			endforeach; ?>
		</table>
		
		<h1>Mes &eacutev&eacutenements en attente de vote</h1>
		<table class="table">
			<?php
			$nbEvtEnAttente = count ( $pendingParticipatings );
			
			foreach ( $pendingParticipatingsLimit as $pendingParticipating ) :
				?>
				 <tr class="<?php echo $this->cycle(array('liste-grise','liste-blanche'))->next()?>">
					<td><?php echo $this->escapeHtml($pendingParticipating->title);?></td>
					<td><a href="<?php echo $this->url('activity', array('action'=>'detailEvent', 'id' => $pendingParticipating->id_event));?>" >
			<?php
				echo $this->dateFormat(
   				new DateTime($pendingParticipating->date),
    			IntlDateFormatter::FULL, // date
    			IntlDateFormatter::SHORT // time
			);
?>
		</td>
					<td><?php echo $this->formRow ( $form->get ( 'voteEvenement' )->setAttribute('value',$pendingParticipating->vote) ).'&nbsp;'; echo $this->formRow ( $form->get ( 'submit' ));?></td>
				</tr>
				<?php 
			endforeach; 
			echo $this->form()->closeTag();
			?>
		</table>
		<?php
		if ($nbEvtEnAttente > $nbLimit) {
			?>
			<p class="table">
				<a class="btn btn-success btn-small pull-right" href="<?php echo $this->url('activity', array('action'=>'listPendingParticipating'));?>">
		<?php echo $this->translate("Plus d'&eacutev&eacutenements en attente") ?>
	</a>
			</p>
			<?php
		}
		?>
		
		<br>
		<h1>Mes groupes</h1>
		<table class="table">
			<?php
			$nbGroupe = count ( $groups );
			foreach ( $groupsLimit as $group ) :
				?>
				<tr class="<?php echo $this->cycle(array('liste-grise','liste-blanche'))->next()?>">
					<td>
						<a href="<?php echo $this->url('group', array('action'=>'details', 'id' => $group->id_group));?>" >
							<?php echo $this->escapeHtml($group->label);?>
						</a>
					</td>
				</tr>
			<?php endforeach; ?>
		</table>
		<?php
		if ($nbGroupe > $nbLimit) {
			?>
			<p class="table">
				<a class="btn btn-success btn-small pull-right" href="<?php echo $this->url('group', array('action'=>'index'));?>">
					<?php echo $this->translate("Plus de groupes") ?> &raquo;
				</a>
			</p>
			<?php
		}
		?>
	</div>
</div>